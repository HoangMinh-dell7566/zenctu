# Bài 4: Phần mềm mạng

Đây là thành phần quan trọng thật sự làm cho mạng máy tính vận hành chứ không phải là phần cứng. Phần mềm mạng được xây dựng dựa trên nền tảng của 3 khái niệm là giao thức (protocol), dịch vụ (service) và giao diện (interface).

- Giao thức (Protocol): Mô tả cách thức hai thành phần giao tiếp trao đổi thông tin với nhau.

- Dịch vụ (Services): Mô tả những gì mà một mạng máy tính cung cấp cho các thành phần muốn giao tiếp với nó.

- Giao diện (Interfaces): Mô tả cách thức mà một khách hàng có thể sử dụng được các dịch vụ mạng và cách thức các dịch vụ có thể được truy cập đến.

## 1.Cấu trúc thứ bậc của giao thức

Nền tảng cho tất cả các phần mềm làm cho mạng máy tính hoạt động chính là khái niệm kiến trúc thứ bậc của giao thức (protocol hierachies). Nó tổ chức các dịch vụ mà một mạng máy tính cung cấp thành các tầng/lớp (layers)
Hai thành phần bộ phận ở hai máy tính khác nhau, nhưng ở cùng cấp, chúng luôn luôn thống nhất với nhau về cách thức mà chúng sẽ trao đổi thông tin. Qui tắc trao đổi thông tin này được mô tả trong một giao thức (protocol).
Một hệ mạng truyền tải dữ liệu thường được thiết kế dưới dạng phân tầng. Để minh họa ý nghĩa của nó ta xem xét mô hình hoạt động của hệ thống gởi nhận thư tín thế giới.
Hai đối tác A ở Paris và B ở Thành phố Cần Thơ thường xuyên trao đổi thư từ với nhau. Vì A không thể nói tiếng Việt và B không thể nói tiếng Pháp, trong khi đó cả hai có thể hiểu tiếng Anh, cho nên nó được chọn là ngôn ngữ để trao đổi thư từ, văn bản giữa A và B. Cả hai gởi thư từ cơ quan của họ. Trong công ty có bộ phận văn thư lãnh trách nhiệm tập hợp và gởi tất cả các thư của công ty ra bưu điện.

Tiến trình A gởi cho B một lá thư diễn ra như sau:

1. A viết một lá thư bằng tiếng Pháp bằng bút máy của anh ta.
2. A đưa lá thư cho thư ký, biết tiếng Anh để thông dịch lá thư ra tiếng Anh, sau đó bỏ lá thư vào bao thư với địa chỉ người nhận là địa chỉ của B.
3. Nhân viên của bộ phận văn thư chịu trách nhiệm thu thập thư của công ty ghé qua văn phòng của A để nhận thư cần gởi đi.
4. Bộ phận văn thư thực hiện việc phân loại thư và dán tem lên các lá thư bằng một máy dán tem.
5. Lá thư được gởi đến bưu điện ở Paris.
6. Lá thư được ô tô chuyển đến trung tâm phân loại ở Paris.
7. Những lá thư gởi sang Việt Nam được chuyển đến sân bay ở Paris bằng tàu điện ngầm.
8. Lá thư gởi sang Việt nam được chuyển đến sân bay Tân Sơn Nhất (Thành Phố Hồ Chí Minh) bằng máy bay.
9. Thư được ô tô chở đến trung tâm phân loại thư của Thành Phố Hồ Chí Minh.
10. Thư cho cơ quan của B được chuyển về Bưu điện Cần Thơ bằng ô tô.
11. Thư cho cơ quan của B được chuyển đến công ty của B bằng ô tô.
12. Bộ phận văn thư của công ty của B tiến hành phân loại thư.
13. Thư được phát vào một giờ đã định đến các người nhận, trong trường hợp này có văn phòng của B.
14. Thư ký của B mở thư ra và dịch nội dung lá thư gởi cho B sang tiếng Việt.
15. B đọc lá thư của A đã gởi cho anh ta.

Ta có thể tóm tắt lại tiến trình trên bằng một mô hình phân tầng với các nút của mạng thư tín này như sau:

![234836312_822561251965488_7170036905550315107_n-removebg-preview.png](https://raw.githubusercontent.com/Zenfection/Image/master/2021/08/08-15-38-26-234836312_822561251965488_7170036905550315107_n-removebg-preview.png)

Trong mô hình trên,mỗi tầng thì dựa trên tầng phía dưới. Ví dụ, các phương tiện của giao thông của tầng như ô tô, tàu hỏa, máy bay (của tầng liên kết dữ liệu) tầng vận chuyển thì cần hạ tầng cơ sở như đường ô tô, đường sắt, sân bay (của tầng vật lý).
Đối với mỗi tầng, các chức năng được định nghĩa là các dịch vụ cung cấp cho tầng phía trên nó. Các đường thẳng màu đỏ trong sơ đồ xác định các dịch vụ được cung cấp bởi các tầng khác nhau. Thêm vào đó, các chức năng của từng tầng tương ứng với các luật được gọi là các giao thức (Protocols).

## 2.Ví dụ cấu trúc thứ bậc của giao thức

Xem xét một ví dụ khác liên quan đến hệ thống truyền tập tin từ máy tính X sang máy Y. Hai máy này được nối với nhau bởi một dây cáp tuần tự. Chúng ta xem xét một mô hình gồm 3 tầng:

- Người sử dụng muốn truyền một tập tin sẽ thực hiện một lời gọi đến tầng A nhờ vào một hàm đã được định nghĩa sẵn, send_file(fileName, destination). Trong đó fileName là tập tin cần truyền đi, destination là điạ chỉ của máy tính nhận tập tin.

- Tầng A phân chia tập tin thành nhiều thông điệp và truyền từng thông điệp nhờ lệnh send_message(MessageNo, destination) do tầng B cung cấp.
  
  <img src="https://raw.githubusercontent.com/Zenfection/Image/master/2021/08/08-15-40-11-233856889_189424806429211_6490917252265663586_n-removebg-preview.png" title="" alt="233856889_189424806429211_6490917252265663586_n-removebg-preview.png" width="311">

- Tầng B quản lý việc gởi các thông điệp, đảm nhiệm việc phân chia các thông điệp thành nhiều đơn vị truyền tin, gọi là các khung (frame); gởi các khung giữa X và Y tuân theo luật đã định trước (protocol) như tần suất gởi, điều khiển luồng, chờ báo nhận của bên nhận, điều khiển lỗi.
  
  ![download-removebg-preview.png](https://raw.githubusercontent.com/Zenfection/Image/master/2021/08/08-15-41-36-download-removebg-preview.png)
  
  Ta cũng chú ý rằng, kích thước của các đơn vị truyền tin trong từng tầng là khác nhau. Ở tầng A đơn vị là một tập tin. Tầng B, đơn vị truyền tin là các khung theo một cấu trúc đã được định nghĩa. Tầng C, đơn vị truyền tin là các tín hiện được truyền trên đường truyền vật lý.

# 
